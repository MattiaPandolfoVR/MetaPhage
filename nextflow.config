/* Default config options for all environments. */

manifest {
  name = 'MetaPhage'
  mainScript = 'main.nf'
  nextflowVersion = '>=20.07.1'
  version = '1.0.0'
}

profiles {
  example { includeConfig './conf/datasets/example.config' }
  slurm { includeConfig './conf/load/slurm.config' }
}

process {
   // DEFAULTS
   withLabel:big_res {
        cpus = 12
        memory = 32.GB
        time = 24.h
    }
  withLabel: med_res {
        cpus = 8
        memory = 16.GB
        time = 24.h
    }
  withLabel: low_res {
        cpus = 4
        memory = 8.GB
        time = 24.h
    }
  withLabel: vcontact2 {
        cpus = 24
        memory = 32.GB
        time = 24.h
    }
  withLabel: graphanalyzer {
        cpus = 2
        memory = 48.GB
        time = 24.h
    }
}

params {
  max_cpus = 24
  max_memory = 64.GB
  max_time = 48.h

  // CONFIG VARIABLES

  // General options
  readPath = "$projectDir/datasets"
  metaPath = "$readPath/metadata"
  dbPath = "$projectDir/db"
  virome_dataset = false
  fqpattern = "_{1,2}.fastq.gz"
  singleEnd = false
  outdir = "$projectDir/output"
  temp_dir = "$projectDir/tmp"
  workDir = "$projectDir/work"

  // Name of the analysis run
  run_name = "base"

  // Trimming
  skip_qtrimming = false
  adapter_forward = "AGATCGGAAGAGCACACGTCTGAACTCCAGTCA"
  adapter_reverse = "AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT"
  mean_quality = 15
  trimming_quality = 15
  keep_phix = false
  mod_phix = "phiX174"

  // microbial taxonomy
  skip_bacterial_taxo = false
  skip_kraken2 = false
  mod_kraken2 = "miniBAV"
  skip_krona = false

  // Assembly
  skip_megahit = false
  skip_metaquast = false
  metaquast_max_ref_num = 50

  // Phage-mining
  skip_mining = false
  skip_deepvirfinder = false
  dvf_maxpvalue = 0.05
  skip_phigaro = false
  mod_phigaro = "standard"
  skip_vibrant = false
  mod_vibrant = "legacy"
  skip_virsorter2 = false
  mod_virsorter2 = "virsorter2"
  virsorter2_include_groups = "dsDNAphage,ssDNA"
  skip_virfinder = false

  // Dereplication
  skip_dereplication = false
  cdhit_sequence_identity = 0.95
  cdhit_alignment_coverage = 0.85
  minlen = 3000

  // Viral Genome Quality
  skip_checkv = false
  mod_checkv = "checkv-db-v1.2"

  // Viral Taxonomy (vContact2)
  skip_viral_taxo = false
  skip_vcontact2 = false
  mod_vcontact2 = "Jun2022" //Set the vcontact2 database directory name
  vcontact2_file_head = "1Jun2022_vConTACT2_" //set the header of files of the vcontact2 database you are using (if using inphared)
  skip_graphanalyzer = false

  // Plots & Report
  metadata = true
  skip_kraken_files = false
  skip_miner_comparison = false
  skip_checkv_table = false
  skip_summary = false
  sum_viol_var = false
  skip_phylo_obj = false
  skip_file_chopper = false
  skip_taxonomy_table = false
  skip_heatmap = false
  heatmap_var = false
  skip_alpha_diversity = false
  alpha_var1 = false
  alpha_var2 = false
  skip_beta_diversity = false
  beta_var = false
  skip_violin_plots = false
  violin_var = false
  skip_report = false
}
