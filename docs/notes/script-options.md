---
sort: 8
---

# MetaPhage Options

These are the parameters supported by the `main.nf` Nextflow script.
Advanced users can invoke the script or modify the configuration file using this reference.

## General options

### `--readPath`

Specify the folder where your datasets are stored. Default is `$projectDir/dataset`. Note that $projectDir correspond to the MetaPhage folder.

### `--metadata`

(Boolean) Specify if metadata are used for the analysis. Default is true. If set to false, will skip many of the plots generated by the pipeline which make use of the metadata variables.

### `--metaPath`

Specify the folder where the dataset's metadata are stored. Default is `$readPath/metadata/`.

### `--dbPath`

Specify the folder where databases are stored. Default is `$projectDir/db`.

### `--virome_dataset`

(Boolean) Specify if the dataset provided is a virome. This will affect different tools usage. Default is `false`.

### `--fqpattern`

Specify your fastq files pattern that defines FW and RV (e.g. R1/R2 or 1/2) and its extension. Default is `_{1,2}.fastq.gz`.

### `--singleEnd`

(Boolean) Specify if your datasets are in single-end mode. Default is `false`. Please note that single-end mode is not supported yet.

### `--outdir`

Specify the folder where your results are stored. Default is `$projectDir/output`.

### `--temp_dir`

Specify the folder where your temporary files are stored. Default is `$projectDir/temp`.

### `--workDir`

Specify the directory where tasks temporary files are created. Default is `$projectDir/work`.

## Quality check and trimming

### `--skip_qtrimming`

(Boolean) Specify whether to perform the quality trimming of your reads or not. Default is `false`.

### `--adapter_forward` and `--adapter_reverse`

Specify the adapter sequences. Deafault are `AGATCGGAAGAGCACACGTCTGAACTCCAGTCA` for forward and `AGATCGGAAGAGCGTCGTGTAGGGAAAGAGTGT` for reverse. 

### `--mean_quality`

(Integer) Given a read, every base having quality less than `--mean_quality` (default is `15`) is marked as "unqualified". If the percentage of unqualified in the read is more that 40%, that that read if excluded from the analysis. See <https://github.com/OpenGene/fastp> for more informations.

### `--trimming_quality`

(Integer) Sliding window trimming is enabled in 5'→3' and in 3'→5' with a window 4bp large. Bases inside the window are trimmed if their mean quality is less then `--trimming_quality` (default is 15). See <https://github.com/OpenGene/fastp> for more informations.

### `--keep_phix`

(Boolean) Specify whether to remove the phix or not. Default is `false`. 

### `--mod_phix`

Specify the phix genome file. There are 2 possibilities:

- `phiX174` (default) search and remove the complete genome of Coliphage phiX174 isolate S1 (GenBank: AF176027.1, <https://www.ncbi.nlm.nih.gov/nuccore/AF176027>). Genome is automatically downloaded if not already present in `./db/phix/`.
- `custom` where custom is the name of your custom .fasta sequence.

## Microbial taxonomy

### `--skip_bacterial_taxo`

(Boolean) Specify whether to skip microbial taxonomy classification step (kraken2 and krona) or not. Default is `false`.

### `--skip_kraken2`

(Boolean) Specify whether to skip the microbial taxonomy classification with Kraken2 or not. Default is `false`.

### `--mod_kraken2`

Specify the db for the short read alignment with Kraken2. There are 2 possibilities:

- `miniBAV` (default) align against RefSeq bacteria, archaea, and viral libraries. Pre-built database taken from <https://ccb.jhu.edu/software/kraken2/downloads.shtml>.
- `custom` where custom is the name of the folder containing your custom `hash.k2d`, `opts.k2d` and `taxo.k2d` files.

### `--skip_krona`

(Boolean) Specify whether to generate the krona-compatible TEXT file using KrakenTools/kreport2krona.py or not. Default is `false`.

## Assembly

### `--skip_megahit`

(Boolean) Specify whether to skip the assembly with MEGAHIT or not. Default is `true`.

### `--skip_metaquast`

(Boolean) Specify whether to skip the assembly evaluation with metaQUAST or not. Default is `false`.

### `--metaquast_max_ref_num`

(Integer) Works with --max-ref-number metaquast command option, which is used to set the maximum number of top scores 16S reference db. These FASTA files are aligned to the assembly contigs in order to identify the genome content of the metagenome when no reference database is provided by the user. Default is 50.

## Phage mining

### `--skip_mining`

(Boolean) Specify whether to skip the phage mining entire step (VIBRANT, phigaro, VirSorter, VirFinder) or not. Default is `false`. If you want to exclude a single or multiple tools from this step, use the specific skip parameter instead.

### `--skip_phskip_deepvirfinderigaro`

(Boolean) Specify whether to skip the phage mining with DeepVirFinder or not. Default is `false`

### `--dvf_maxpvalue`

(Float) Specify the p-value threshold for which MetaPhage will filter DeepVirFinder results. Default is 0.05.

### `--skip_phigaro`

(Boolean) Specify whether to skip the phage mining with Phigaro or not. Default is `false`.

### `--mod_phigaro`

Specify the db for PHIGARO. There are 2 possibilities:

- `standard` (default) use phigaro 2.3.0 db.

- `custom` where custom is the name of your custom db.

### `--skip_vibrant`

(Boolean) Specify whether to skip the phage mining with VIBRANT or not. Default is `false`.

### `--mod_vibrant`

Specify the db for VIBRANT. There are 2 possibilities:

- `legacy` (default) use VIBRANT 1.0.1 db.
- `custom` where custom is the name of your custom db.

### `--skip_virfinder`

(Boolean) Specify whether to skip the phage mining with VirFinder or not. Default is `false`.

### `--skip_virsorter2`

(Boolean) Specify whether to skip the phage mining with VirSorter or not. Default is `false`.

### `--mod_virsorter2`

Specify the db for VirSorter2. There are 2 possibilities:

- `virsorter2` (default) use VirSorter 2.2.3 db.
- `custom` where custom is the name of your custom db.

### `--virsorter2_include_groups`

Works with –include-groups VirSorter2 command option. This option is used to set the viral groups that VirSorter2 uses to mine viral contigs. The available options are dsDNAphage, NCLDV, RNA, ssDNA virus, and Lavidaviridae. Default is dsDNA and ssDNA.

## Dereplication and reads mapping

### `--skip_dereplication`

(Boolean) Specify whether to skip the dereplication of viral scaffolds or not. Default is `false`.

### `--cdhit_sequence_identity`

(Float) Works with -c cd-hit-est command option. This option is used to set the cd-hit’s “global sequence identity”. Default is 0.95.

### `--cdhit_alignment_coverage`

(Float) Works with -aS cd-hit-est command option. This option is used to set the alignment coverage for the shorter sequence. Default is 0.85.

### `--minlen`

Specify the minimal length in bp for a viral _consensus_ scaffold. Default is `3000`.

## Viral Genome Quality

### `--skip_checkv`

(Boolean) Specify whether to skip CheckV or not. This tool performs a quality assesment of the dereplicated consensus viral contigs. Default is `false`.

### `--mod_checkv`

Specify the database for CheckV. There are 2 possibilities:

- `checkv-db-v1.2` (default).
- `custom` where custom is the name of your custom db.

## Viral taxonomy

### `--skip_viral_taxo`

(Boolean) Specify whether to skip the viral taxonomy classification step (vcontact2, graphanalyzer) or not. Default is `false`.

### `--skip_vcontact2`

(Boolean) Specify whether to skip the phage taxonomy classification with vcontact2. Default is `false`.

### `--mod_vcontact2`

Specify the modality of the phage taxonomy analysis with vConTACT2. Currently there are 2 possibilities (new modalities will be added periodically):

- `Jun2022` (default) use vConTACT2 with the outputs generated by <https://github.com/RyanCook94/inphared.pl> script runned on June 2022. 
- `custom` where custom is the name of your custom db. With this modality you also have to specify `--vcontact2_file_head`, which is the prefix of the files you want to use. All these files must share the same prefix.

### `--vcontact2_file_head`

Specify the INPHARED files prefix (vcontact2 db). Default is `1Jun2022_vConTACT2_` If you use a different version of inphared, specify the file prefix string (usually `dd/mm/yyyy_vConTACT2_`). 

### `--skip_graphanalyzer`

(Boolean) Specify wheter to skip the automatic phage taxonomy assignment with graphanalyzer and taxonomy table csv file. Default is `false`.

## Plots and report

### `--skip_kraken_files`

(Boolean) Specify whether to skip the kraken and krona link table generation, which will be found in the multiqc report. Default is `false`.

### `--skip_miner_comparison`

(Boolean) Specify whether to skip or not the miner comparison plot (upSet plot), the viral contigs distribution plot (pre-dereplication) and the Viral Contigs miner comparison table, which is an interactive table in the multiqc report to scan for every viral contigs outputted by the used miners. Default is `false`.

### `--skip_checkv_table`

(Boolean) Specify whether to skip the checkv quality summary interactive table generation, which will be found in the multiqc report. Default is `false`.

### `--skip_summary`

(Boolean) Specify whether to skip the summary table generation and single (for each sample) violin plots creation or not. Default is `false`.

### `--sum_viol_var`

Specify the name of the variable (metadata column) to use for the single sample violin plot, which will be linked in the summary table.

### `--skip_phylo_obj`

(Boolean) Specify whether to skip the generation of the raw phyloseq object and the CSS normalized one. Default is `false`.

### `--skip_file_chopper`

(Boolean) Specify whether to skip the generation of single sample vOTUs fasta, proteins (.faa) and genes coordinates (.gff) files. table generation or not. Default is `false`.

### `--skip_taxonomy_table`

(Boolean) Specify whether to skip the taxonomy table generation or not. Default is `false`.

### `--skip_heatmap`

(Boolean) Specify whether to skip the heatmap plot creation or not. Default is `false`.

### `--heatmap_var`

Specify the name of the variable (metadata column) to use for the heatmap top dendrogram subdivision. (Requested) in order to generate the heatmap.

### `--skip_alpha_diversity`

(Boolean) Specify whether to skip the alpha-diversity plots creation or not. Default is `false`.

### `--alpha_var1`

Specify the name of the variable (metadata column) to use for the alpha-diversity sample clustering (on the x-axis). (Requested) in order to generate the alpha-diversity plots.

### `--alpha_var2`

Specify the name of the variable (metadata column) to use for the alpha-diversity color mapping. (Requested) in order to generate the alpha-diversity plots.

### `--skip_beta_diversity`

(Boolean) Specify whether to skip the beta-diversity plots creation or not. Default is `false`.

### `--beta_var`

Specify the name of the variable (metadata column) to use for the beta-diversity color mapping. (Requested) in order to generate the beta-diversity plots.

### `--skip_violin_plots`

(Boolean) Specify whether to skip the violin plot (samples clustered for a variable) or not. Default is `false`.

### `--violin_var`

Specify the name of the variable (metadata column) to use for the violin plot clustering. (Requested) in order to generate the violin plot.

### `--skip_report`

(Boolean) Specify whether to skip the report step (Multiqc report) or not. Default is `false`.
